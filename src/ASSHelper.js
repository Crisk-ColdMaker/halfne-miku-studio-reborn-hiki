const japanese = require('japanese');
const asscompiler = require('ass-compiler');
const testASS = '[Script Info]\n' +
    '; Script generated by karaoke.vmoe.info\n' +
    'ScriptType: v4.00+\n' +
    'Original Timing: karaoke.vmoe.info\n' +
    'PlayResX: 1920\n' +
    'PlayResY: 1080\n' +
    '\n' +
    '\n' +
    '[Aegisub Project Garbage]\n' +
    'Audio File: \n' +
    'Video File: ?dummy:60.000000:21600:1920:1080:73:73:73:\n' +
    '\n' +
    '[V4+ Styles]\n' +
    'Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding\n' +
    'Style: K1,TakaoPGothic,80,&H00FFFFFF,&H00FFFFFF,&H00000000,&H80000000,0,0,0,0,100,100,0,0,1,4,0,1,120,30,240,1\n' +
    'Style: K2,TakaoPGothic,80,&H00FFFFFF,&H00FFFFFF,&H00000000,&H80000000,0,0,0,0,100,100,0,0,1,4,0,3,30,120,40,1\n' +
    'Style: noK,TakaoPGothic,80,&H0039FFFF,&H00FFFFFF,&H00000000,&H80000000,0,0,0,0,100,100,0,0,1,4,0,2,0,0,440,1\n' +
    '\n' +
    '[Events]\n' +
    'Format: Layer, Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text\n' +
    'Comment: 0,0:00:00.00,0:00:00.00,K1,,0,0,0,code once,line_strech = 0.7; colors = {{\'&HFFFFFF&\',\'&H080808&\',\'&H0000B4&\',\'&HFFFFFF&\'},}; prevline = {}\n' +
    'Comment: 0,0:00:00.00,0:00:00.00,K1,,0,0,0,code line all,x,y=string.match(line.raw,"{.*\\\\pos%((%-?%d+%.?%d*),(%-?%d+%.?%d*)%).*}") y=math.floor((y-862)*line_strech+862+1080/8) x=math.floor(x+1920/8)\n' +
    'Comment: 0,0:00:00.00,0:00:00.00,K1,,0,0,0,code syl furi all,if syl.inline_fx~=\'\' then style_index = string.byte(syl.inline_fx)-64 else style_index = 1 end\n' +
    'Comment: 0,0:00:00.00,0:00:00.00,K1,,0,0,0,code line all,if prevline[line.style]  then pline = prevline[line.style] end\n' +
    'Comment: 0,0:00:00.00,0:00:00.00,K1,,0,0,0,code line all,interdur = {} if pline then interdur[line.styleref] = line.start_time - pline.end_time   end\n' +
    'Comment: 0,0:00:00.00,0:00:00.00,K1,set fxgroup and firstline,0,0,0,code line all,fxgroup.base =  1  \n' +
    'Comment: 0,0:00:00.00,0:00:00.00,K1,set fxgroup and firstline,0,0,0,code syl furi all,fxgroup.firstline_overlay = syl.duration>10 fxgroup.has_prevline_overlay = syl.duration>10 fxgroup.overlay = line.styleref.name~=\'noK\' and syl.duration>0\n' +
    'Comment: 0,0:00:00.00,0:00:00.00,K1,,0,0,0,code line all,prevline[line.style] = line\n' +
    'Comment: 0,0:00:05.00,0:00:05.00,K1,base,0,0,0,template syl furi fxgroup base all,!retime("line")!{\\pos(!math.floor(x+syl.width/2+syl.left)!,!syl.isfuri and math.floor(y-syl.height*3/2) or y !)\\an5}{\\1c!colors[style_index][1]!\\3c!colors[style_index][2]!}\n' +
    'Comment: 0,0:00:05.00,0:00:05.00,K1,overlay,0,0,0,template syl furi fxgroup overlay all,!relayer(2)!!retime("line")!{\\pos(!math.floor(x+syl.width/2+syl.left)!,!syl.isfuri and math.floor(y-syl.height*3/2) or y!)\\an5\\shad0\\clip(!x+syl.left-line.styleref.outline-1!,0,!x+syl.left-line.styleref.outline-1!,1080)\\t($sstart,$send,\\clip(!x+syl.left-line.styleref.outline-1!,0,!x+syl.right+line.styleref.outline+1!,1080))\\bord!line.styleref.outline+1!}{\\1c!colors[style_index][3]!\\3c!colors[style_index][4]!}\n' +
    'Dialogue: 0,0:00:10.08,0:00:14.76,K2,,0,0,0,karaoke,{\\pos(207,439)}{\\-A}{\\k251}{\\k33}嗚呼|<あ{\\k33}#|<あ{\\k2}、{\\k22}い{\\k22}つ{\\k22}も{\\k22}の{\\k11}様|<よ{\\k11}#|<う{\\k40}に\n' +
    'Dialogue: 0,0:00:10.08,0:00:17.44,K1,,0,0,0,karaoke,{\\pos(261,650)}{\\-A}{\\k495}{\\k21}過|<す{\\k22}ぎ{\\k23}る{\\k23}日|<ひ{\\k23}々|<び{\\k40}に\n' +
    'Dialogue: 0,0:00:10.08,0:00:19.25,K2,,0,0,0,karaoke,{\\pos(746,862)}{\\-A}{\\k673}{\\k21}あ{\\k23}く{\\k22}び{\\k22}が{\\k23}出|<で{\\k40}る\n' +
    'Dialogue: 0,0:00:17.55,0:00:23.44,K1,,0,0,0,karaoke,{\\pos(207,439)}{\\-A}{\\k126}{\\k21}さ{\\k22}ん{\\k22}ざ{\\k22}め{\\k69}く{\\k35}夜|<よ{\\k33}#|<る{\\k2}、{\\k22}越|<こ{\\k40}え、\n' +
    'Dialogue: 0,0:00:17.55,0:00:23.44,K2,,0,0,0,karaoke,{\\pos(1084,650)}{\\-A}{\\k415}{\\k22}今日|<きょ{\\k22}#|<う{\\k38}も\n' +
    'Dialogue: 0,0:00:19.36,0:00:26.81,K1,,0,0,0,karaoke,{\\pos(337,862)}{\\-A}{\\k322}{\\k22}渋|<し{\\k22}#|<ぶ{\\k22}谷|<や{\\k22}の{\\k22}街|<ま{\\k22}#|<ち{\\k46}に{\\k22}朝|<あ{\\k22}#|<さ{\\k44}が{\\k23}降|<ふ{\\k40}る\n' +
    'Dialogue: 0,0:00:23.86,0:00:31.49,K2,,0,0,0,karaoke,{\\pos(207,439)}{\\-A}{\\k251}{\\k21}ど{\\k23}こ{\\k62}か{\\k24}虚|<む{\\k22}#|<な{\\k24}し{\\k23}い{\\k12}よ{\\k12}う{\\k39}な\n' +
    'Dialogue: 0,0:00:23.86,0:00:31.49,K1,,0,0,0,karaoke,{\\pos(787,650)}{\\-A}{\\k540}{\\k21}そ{\\k22}ん{\\k22}な{\\k22}気持|<き{\\k22}#|<も{\\k40}ち\n' +
    'Dialogue: 0,0:00:26.92,0:00:33.48,K2,,0,0,0,karaoke,{\\pos(510,862)}{\\-A}{\\k411}{\\k21}つ{\\k23}ま{\\k23}ら{\\k22}な{\\k23}い{\\k39}な\n' +
    'Dialogue: 0,0:00:31.61,0:00:38.33,K1,,0,0,0,karaoke,{\\pos(207,439)}{\\-A}{\\k120}{\\k21}で{\\k22}も{\\k22}そ{\\k22}れ{\\k22}で{\\k20}い{\\k20}い\n' +
    'Dialogue: 0,0:00:31.61,0:00:38.33,K2,,0,0,0,karaoke,{\\pos(261,650)}{\\-A}{\\k298}{\\k21}そ{\\k22}ん{\\k22}な{\\k22}も{\\k22}ん{\\k40}さ{\\k-447} {\\-A}{\\k476}{\\k21}こ{\\k23}れ{\\k22}で{\\k20}い{\\k19}い\n' +
    'Dialogue: 0,0:00:33.59,0:00:41.03,K1,,0,0,0,karaoke,{\\pos(301,862)}{\\-A}{\\k389}{\\k21}知|<し{\\k22}ら{\\k23}ず{\\k22}知|<し{\\k23}ら{\\k24}ず{\\k22}隠|<か{\\k22}#|<く{\\k23}し{\\k24}て{\\k40}た\n' +
    'Dialogue: 0,0:00:38.44,0:00:45.44,K2,,0,0,0,karaoke,{\\pos(207,227)}{\\-A}{\\k170}{\\k22}本|<ほ{\\k22}#|<ん{\\k23}当|<と{\\k23}の{\\k35}声|<こ{\\k34}#|<え{\\k47}を{\\k22}響|<ひ{\\k20}#|<び{\\k24}か{\\k35}せ{\\k31}て{\\k39}よ、\n' +
    'Dialogue: 0,0:00:38.44,0:00:45.44,K1,,0,0,0,karaoke,{\\pos(1210,439)}{\\-A}{\\k548}{\\k21}ほ{\\k40}ら\n' +
    'Dialogue: 0,0:00:38.44,0:00:48.11,K2,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k615}{\\k22}見|<み{\\k22}な{\\k22}い{\\k24}フ{\\k44}リ{\\k23}し{\\k22}て{\\k22}い{\\k23}て{\\k38}も\n' +
    'Dialogue: 0,0:00:41.14,0:00:50.11,K1,,0,0,0,karaoke,{\\pos(634,862)}{\\-A}{\\k611}{\\k22}確|<た{\\k22}#|<し{\\k22}か{\\k24}に{\\k34}そ{\\k34}こ{\\k44}に{\\k24}あ{\\k40}る\n' +
    'Dialogue: 0,0:00:50.22,0:00:55.44,K2,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k148}{\\k22}感|<か{\\k22}#|<ん{\\k24}じ{\\k44}た{\\k23}ま{\\k26}ま{\\k45}に{\\k22}描|<え{\\k24}#|<が{\\k40}く\n' +
    'Dialogue: 0,0:00:50.22,0:00:59.03,K1,,0,0,0,karaoke,{\\pos(355,862)}{\\-A}{\\k437}{\\k22}自|<じ{\\k34}分|<ぶ{\\k34}#|<ん{\\k22}で{\\k17}選|<え{\\k17}#|<ら{\\k33}ん{\\k22}だ{\\k24}そ{\\k44}の{\\k22}色|<い{\\k22}#|<ろ{\\k39}で\n' +
    'Dialogue: 0,0:00:55.63,0:01:02.55,K2,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k251}{\\k22}眠|<ね{\\k22}#|<む{\\k47}い{\\k22}空|<く{\\k22}#|<う{\\k44}気|<き{\\k22}纏|<ま{\\k23}#|<と{\\k45}う{\\k22}朝|<あ{\\k23}#|<さ{\\k40}に\n' +
    'Dialogue: 0,0:00:59.14,0:01:05.92,K1,,0,0,0,karaoke,{\\pos(607,862)}{\\-A}{\\k266}{\\k18}訪|<お{\\k19}#|<と{\\k19}#|<ず{\\k2} {\\k44}れ{\\k22}た{\\k46}青|<あ{\\k22}#|<お{\\k23}い{\\k44}世|<せ{\\k16}界|<か{\\k48}#|<い\n' +
    'Dialogue: 0,0:01:02.74,0:01:09.66,K2,,0,0,0,karaoke,{\\pos(261,439)}{\\-A}{\\k251}{\\k21}好|<す{\\k23}き{\\k46}な{\\k22}も{\\k23}の{\\k39}を\n' +
    'Dialogue: 0,0:01:02.74,0:01:09.66,K1,,0,0,0,karaoke,{\\pos(755,650)}{\\-A}{\\k429}{\\k21}好|<す{\\k23}き{\\k46}だ{\\k23}と{\\k24}言|<い{\\k40}う\n' +
    'Dialogue: 0,0:01:06.03,0:01:12.81,K2,,0,0,0,karaoke,{\\pos(355,862)}{\\-A}{\\k278}{\\k22}怖|<こ{\\k22}#|<わ{\\k46}く{\\k22}て{\\k25}仕|<し{\\k44}方|<か{\\k21}#|<た{\\k22}な{\\k22}い{\\k24}け{\\k39}ど\n' +
    'Dialogue: 0,0:01:09.77,0:01:14.99,K1,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k215}{\\k22}本当|<ほ{\\k22}#|<ん{\\k22}#|<と{\\k22}#|<う{\\k44}の{\\k22}自|<じ{\\k20}分|<ぶ{\\k40}#|<ん\n' +
    'Dialogue: 0,0:01:12.92,0:01:17.48,K2,,0,0,0,karaoke,{\\pos(373,862)}{\\-A}{\\k122}{\\k21}出会|<で{\\k22}#|<あ{\\k22}え{\\k22}た{\\k22}気|<き{\\k22}が{\\k23}し{\\k22}た{\\k22}ん{\\k39}だ\n' +
    'Dialogue: 0,0:01:24.74,0:01:30.33,K1,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k251}{\\k32}嗚呼|<あ{\\k34}#|<あ{\\k2}、{\\k22}手|<て{\\k22}を{\\k22}伸|<の{\\k23}ば{\\k22}せ{\\k40}ば\n' +
    'Dialogue: 0,0:01:24.74,0:01:33.92,K2,,0,0,0,karaoke,{\\pos(274,862)}{\\-A}{\\k495}{\\k22}伸|<の{\\k22}ば{\\k22}す{\\k22}ほ{\\k22}ど{\\k40}に{\\k-645} {\\-A}{\\k673}{\\k22}遠|<と{\\k22}#|<お{\\k23}く{\\k22}へ{\\k23}ゆ{\\k40}く\n' +
    'Dialogue: 0,0:01:30.97,0:01:38.11,K1,,0,0,0,karaoke,{\\pos(261,439)}{\\-A}{\\k251}{\\k22}思|<お{\\k22}#|<も{\\k23}う{\\k11}よ{\\k17}う{\\k63}に{\\k25}い{\\k42}か{\\k22}な{\\k39}い、\n' +
    'Dialogue: 0,0:01:30.97,0:01:38.11,K2,,0,0,0,karaoke,{\\pos(1030,650)}{\\-A}{\\k540}{\\k21}今日|<きょ{\\k23}#|<う{\\k38}も\n' +
    'Dialogue: 0,0:01:34.03,0:01:41.48,K1,,0,0,0,karaoke,{\\pos(229,862)}{\\-A}{\\k322}{\\k22}ま{\\k22}た{\\k22}慌|<あ{\\k22}#|<わ{\\k22}た{\\k22}だ{\\k42}し{\\k25}く{\\k22}も{\\k22}が{\\k22}い{\\k23}て{\\k40}る\n' +
    'Dialogue: 0,0:01:38.52,0:01:46.16,K2,,0,0,0,karaoke,{\\pos(207,439)}{\\-A}{\\k251}{\\k22}悔|<く{\\k22}#|<や{\\k35}し{\\k33}い{\\k22}気持|<き{\\k22}#|<も{\\k23}ち{\\k21}も\n' +
    'Dialogue: 0,0:01:38.52,0:01:46.16,K1,,0,0,0,karaoke,{\\pos(706,650)}{\\-A}{\\k451}{\\k21}た{\\k64}だ{\\k23}情|<な{\\k22}#|<さ{\\k23}け{\\k22}な{\\k23}く{\\k38}て\n' +
    'Dialogue: 0,0:01:41.59,0:01:47.94,K2,,0,0,0,karaoke,{\\pos(567,862)}{\\-A}{\\k422}{\\k18}涙|<な{\\k19}#|<み{\\k19}#|<だ{\\k2} {\\k22}が{\\k23}出|<で{\\k40}る\n' +
    'Dialogue: 0,0:01:46.27,0:01:49.88,K1,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k120}{\\k21}踏|<ふ{\\k23}み{\\k22}込|<こ{\\k22}む{\\k22}ほ{\\k38}ど\n' +
    'Dialogue: 0,0:01:48.05,0:01:53.08,K2,,0,0,0,karaoke,{\\pos(396,862)}{\\-A}{\\k120}{\\k22}苦|<く{\\k22}#|<る{\\k23}し{\\k23}く{\\k24}な{\\k40}る{\\k-274} {\\-A}{\\k298}{\\k22}痛|<い{\\k22}#|<た{\\k23}く{\\k22}も{\\k23}な{\\k40}る\n' +
    'Dialogue: 0,0:01:53.19,0:01:59.44,K1,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k251}{\\k22}感|<か{\\k22}#|<ん{\\k24}じ{\\k44}た{\\k23}ま{\\k26}ま{\\k45}に{\\k22}進|<す{\\k22}#|<す{\\k40}む\n' +
    'Dialogue: 0,0:01:53.19,0:02:03.03,K2,,0,0,0,karaoke,{\\pos(369,862)}{\\-A}{\\k540}{\\k22}自|<じ{\\k34}分|<ぶ{\\k34}#|<ん{\\k22}で{\\k17}選|<え{\\k17}#|<ら{\\k33}ん{\\k22}だ{\\k25}こ{\\k44}の{\\k22}道|<み{\\k22}#|<ち{\\k39}を\n' +
    'Dialogue: 0,0:01:59.63,0:02:06.55,K1,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k251}{\\k22}重|<お{\\k22}#|<も{\\k46}い{\\k23}ま{\\k25}ぶ{\\k44}た{\\k22}擦|<こ{\\k23}#|<す{\\k44}る{\\k22}夜|<よ{\\k23}#|<る{\\k40}に\n' +
    'Dialogue: 0,0:02:03.14,0:02:09.92,K2,,0,0,0,karaoke,{\\pos(391,862)}{\\-A}{\\k256}{\\k21}し{\\k23}が{\\k22}み{\\k22}つ{\\k22}い{\\k22}た{\\k46}青|<あ{\\k22}#|<お{\\k23}い{\\k35}誓|<ち{\\k33}#|<か{\\k39}い\n' +
    'Dialogue: 0,0:02:06.74,0:02:13.66,K1,,0,0,0,karaoke,{\\pos(207,439)}{\\-A}{\\k251}{\\k21}好|<す{\\k23}き{\\k46}な{\\k24}こ{\\k26}と{\\k46}を{\\k22}続|<つ{\\k23}#|<づ{\\k40}け{\\k23}る{\\k29}こ{\\k38}と\n' +
    'Dialogue: 0,0:02:06.74,0:02:16.81,K2,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k606}{\\k21}そ{\\k22}れ{\\k67}は「{\\k11}楽|<た{\\k11}#|<の{\\k14}し{\\k26}い」\n' +
    'Dialogue: 0,0:02:10.03,0:02:16.81,K1,,0,0,0,karaoke,{\\pos(823,862)}{\\-A}{\\k456}{\\k22}だ{\\k22}け{\\k22}じゃ{\\k22}な{\\k38}い\n' +
    'Dialogue: 0,0:02:13.77,0:02:20.99,K2,,0,0,0,karaoke,{\\pos(207,439)}{\\-A}{\\k215}{\\k22}本当|<ほ{\\k22}#|<ん{\\k22}#|<と{\\k22}#|<う{\\k45}に{\\k22}で{\\k23}き{\\k40}る?\n' +
    'Dialogue: 0,0:02:16.92,0:02:20.99,K1,,0,0,0,karaoke,{\\pos(701,650)}{\\-A}{\\k122}{\\k21}不|<ふ{\\k21}安|<あ{\\k22}#|<ん{\\k24}に{\\k22}な{\\k23}る{\\k23}け{\\k39}ど\n' +
    'Dialogue: 0,0:02:16.92,0:02:24.16,K2,,0,0,0,karaoke,{\\pos(268,862)}{\\-A}{\\k367}{\\k16}何|<な{\\k16}#|<ん{\\k17}枚|<ま{\\k18}#|<い{\\k22}で{\\k39}も{\\k-494} {\\-A}{\\k500}{\\k21}ほ{\\k23}ら{\\k17}何|<な{\\k17}#|<ん{\\k17}枚|<ま{\\k16}#|<い{\\k24}で{\\k39}も\n' +
    'Dialogue: 0,0:02:21.19,0:02:26.36,K1,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k251}{\\k22}自|<じ{\\k22}信|<し{\\k22}#|<ん{\\k23}が{\\k22}な{\\k22}い{\\k22}か{\\k21}ら\n' +
    'Dialogue: 0,0:02:24.27,0:02:27.72,K2,,0,0,0,karaoke,{\\pos(612,862)}{\\-A}{\\k120}{\\k10}描|<え{\\k11}#|<が{\\k22}い{\\k18}て{\\k17}き{\\k17}た{\\k17}ん{\\k23}だ{\\k40}よ\n' +
    'Dialogue: 0,0:02:26.48,0:02:29.49,K1,,0,0,0,karaoke,{\\pos(315,650)}{\\-A}{\\k122}{\\k16}何回|<な{\\k16}#|<ん{\\k17}#|<か{\\k18}#|<い{\\k22}で{\\k39}も\n' +
    'Dialogue: 0,0:02:27.83,0:02:31.70,K2,,0,0,0,karaoke,{\\pos(688,862)}{\\-A}{\\k120}{\\k21}ほ{\\k23}ら{\\k17}何回|<な{\\k17}#|<ん{\\k17}#|<か{\\k16}#|<い{\\k24}で{\\k39}も\n' +
    'Dialogue: 0,0:02:29.61,0:02:36.38,K1,,0,0,0,karaoke,{\\pos(207,227)}{\\-A}{\\k120}{\\k21}積|<つ{\\k22}み{\\k22}上|<あ{\\k22}げ{\\k22}て{\\k23}き{\\k22}た{\\k12}こ{\\k23}と{\\k22}が\n' +
    'Dialogue: 0,0:02:29.61,0:02:36.38,K2,,0,0,0,karaoke,{\\pos(895,439)}{\\-A}{\\k332}{\\k32}武器|<ぶ{\\k23}#|<き{\\k23}に{\\k23}な{\\k40}る\n' +
    'Dialogue: 0,0:02:29.61,0:02:36.38,K1,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k476}{\\k22}周|<ま{\\k22}#|<わ{\\k23}り{\\k22}を{\\k11}見|<み{\\k12}た{\\k14}っ{\\k33}て\n' +
    'Dialogue: 0,0:02:31.81,0:02:38.62,K2,,0,0,0,karaoke,{\\pos(715,862)}{\\-A}{\\k411}{\\k22}誰|<だ{\\k22}#|<れ{\\k24}と{\\k22}比|<く{\\k21}#|<ら{\\k11}べ{\\k12}た{\\k14}っ{\\k33}て\n' +
    'Dialogue: 0,0:02:36.49,0:02:45.66,K1,,0,0,0,karaoke,{\\pos(207,227)}{\\-A}{\\k120}{\\k22}僕|<ぼ{\\k22}#|<く{\\k23}に{\\k23}し{\\k22}か{\\k22}で{\\k23}き{\\k22}な{\\k22}い{\\k27}こ{\\k40}と{\\k21}は\n' +
    'Dialogue: 0,0:02:36.49,0:02:45.66,K2,,0,0,0,karaoke,{\\pos(1084,439)}{\\-A}{\\k409}{\\k22}な{\\k22}ん{\\k38}だ\n' +
    'Dialogue: 0,0:02:36.49,0:02:45.66,K1,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k498}{\\k40}今|<い{\\k41}#|<ま{\\k28}で{\\k44}も{\\k24}自|<じ{\\k22}信|<し{\\k22}#|<ん{\\k23}な{\\k22}ん{\\k22}か{\\k20}な{\\k19}い\n' +
    'Dialogue: 0,0:02:38.73,0:02:46.81,K2,,0,0,0,karaoke,{\\pos(994,862)}{\\-A}{\\k608}{\\k21}そ{\\k22}れ{\\k22}で{\\k38}も\n' +
    'Dialogue: 0,0:02:45.77,0:02:50.99,K1,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k148}{\\k22}感|<か{\\k22}#|<ん{\\k23}じ{\\k44}た{\\k23}こ{\\k22}と{\\k22}な{\\k22}い{\\k22}気持|<き{\\k24}#|<も{\\k40}ち\n' +
    'Dialogue: 0,0:02:46.92,0:02:53.70,K2,,0,0,0,karaoke,{\\pos(603,862)}{\\-A}{\\k322}{\\k21}知|<し{\\k23}ら{\\k24}ず{\\k66}に{\\k22}い{\\k24}た{\\k22}想|<お{\\k22}#|<も{\\k39}い\n' +
    'Dialogue: 0,0:02:51.11,0:02:58.59,K1,,0,0,0,karaoke,{\\pos(207,439)}{\\-A}{\\k215}{\\k21}あ{\\k22}の{\\k23}日|<ひ{\\k22}踏|<ふ{\\k22}み{\\k44}出|<だ{\\k24}し{\\k38}て\n' +
    'Dialogue: 0,0:02:51.11,0:02:58.59,K2,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k437}{\\k22}初|<は{\\k22}#|<じ{\\k22}め{\\k69}て{\\k22}感|<か{\\k21}#|<ん{\\k23}じ{\\k21}た\n' +
    'Dialogue: 0,0:02:53.81,0:03:01.25,K1,,0,0,0,karaoke,{\\pos(679,862)}{\\-A}{\\k389}{\\k21}こ{\\k62}の{\\k24}痛|<い{\\k22}#|<た{\\k24}み{\\k22}も{\\k20}全|<ぜ{\\k22}#|<ん{\\k41}部|<ぶ\n' +
    'Dialogue: 0,0:02:58.70,0:03:05.22,K2,,0,0,0,karaoke,{\\pos(261,439)}{\\-A}{\\k211}{\\k21}好|<す{\\k23}き{\\k46}な{\\k22}も{\\k23}の{\\k38}と\n' +
    'Dialogue: 0,0:02:58.70,0:03:05.22,K1,,0,0,0,karaoke,{\\pos(665,650)}{\\-A}{\\k389}{\\k22}向|<む{\\k23}き{\\k22}合|<あ{\\k23}う{\\k23}こ{\\k24}と{\\k39}で\n' +
    'Dialogue: 0,0:03:01.36,0:03:08.36,K2,,0,0,0,karaoke,{\\pos(317,862)}{\\-A}{\\k300}{\\k21}触|<ふ{\\k23}れ{\\k44}た{\\k24}ま{\\k23}だ{\\k22}小|<ち{\\k22}#|<い{\\k23}さ{\\k33}な {\\k17}光|<ひ{\\k28}#|<か{\\k29}#|<り{\\k2}\n' +
    'Dialogue: 0,0:03:05.33,0:03:10.55,K1,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k215}{\\k28}大|<だ{\\k24}#|<い{\\k2} {\\k19}丈|<じょ{\\k19}#|<う{\\k2} {\\k45}夫|<ぶ{\\k2}、{\\k22}行|<い{\\k23}こ{\\k39}う、\n' +
    'Dialogue: 0,0:03:08.48,0:03:13.03,K2,,0,0,0,karaoke,{\\pos(513,862)}{\\-A}{\\k122}{\\k21}あ{\\k23}と{\\k22}は{\\k22}楽|<た{\\k22}#|<の{\\k23}し{\\k22}む{\\k22}だ{\\k23}け{\\k39}だ\n' +
    'Dialogue: 0,0:03:13.19,0:03:19.44,K1,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k251}{\\k22}全|<す{\\k22}#|<べ{\\k22}て{\\k46}を{\\k22}賭|<か{\\k24}け{\\k48}て{\\k22}描|<え{\\k24}#|<が{\\k40}く\n' +
    'Dialogue: 0,0:03:13.19,0:03:23.03,K2,,0,0,0,karaoke,{\\pos(288,862)}{\\-A}{\\k540}{\\k22}自|<じ{\\k34}分|<ぶ{\\k34}#|<ん{\\k23}に{\\k24}し{\\k42}か{\\k22}出|<だ{\\k22}せ{\\k22}な{\\k24}い{\\k22}色|<い{\\k22}#|<ろ{\\k39}で\n' +
    'Dialogue: 0,0:03:19.63,0:03:26.55,K1,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k251}{\\k22}朝|<あ{\\k22}#|<さ{\\k47}も{\\k22}夜|<よ{\\k23}#|<る{\\k47}も{\\k22}走|<は{\\k24}#|<し{\\k44}り{\\k22}続|<つ{\\k22}#|<づ{\\k40}け\n' +
    'Dialogue: 0,0:03:23.14,0:03:29.92,K2,,0,0,0,karaoke,{\\pos(427,862)}{\\-A}{\\k256}{\\k22}見|<み{\\k22}つ{\\k22}け{\\k22}出|<だ{\\k23}し{\\k22}た{\\k46}青|<あ{\\k22}#|<お{\\k34}い {\\k18}光|<ひ{\\k36}#|<か{\\k40}#|<り{\\k2}\n' +
    'Dialogue: 0,0:03:26.74,0:03:33.66,K1,,0,0,0,karaoke,{\\pos(261,439)}{\\-A}{\\k251}{\\k21}好|<す{\\k23}き{\\k46}な{\\k22}も{\\k23}の{\\k38}と\n' +
    'Dialogue: 0,0:03:26.74,0:03:33.66,K2,,0,0,0,karaoke,{\\pos(769,650)}{\\-A}{\\k429}{\\k21}向|<む{\\k23}き{\\k44}合|<あ{\\k23}う{\\k25}こ{\\k38}と\n' +
    'Dialogue: 0,0:03:30.03,0:03:36.81,K1,,0,0,0,karaoke,{\\pos(270,862)}{\\-A}{\\k278}{\\k22}今|<い{\\k22}#|<ま{\\k22}だ{\\k23}っ{\\k23}て{\\k17}怖|<こ{\\k18}#|<わ{\\k32}い{\\k23}こ{\\k23}と{\\k22}だ{\\k25}け{\\k38}ど\n' +
    'Dialogue: 0,0:03:33.77,0:03:39.25,K2,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k215}{\\k21}も{\\k23}う{\\k22}今|<い{\\k22}#|<ま{\\k44}は{\\k22}あ{\\k22}の{\\k44}日|<ひ{\\k21}の\n' +
    'Dialogue: 0,0:03:36.92,0:03:41.22,K1,,0,0,0,karaoke,{\\pos(598,862)}{\\-A}{\\k144}{\\k22}透明|<と{\\k22}#|<う{\\k22}#|<め{\\k22}#|<い{\\k22}な{\\k22}僕|<ぼ{\\k22}#|<く{\\k22}じゃ{\\k22}な{\\k60}い\n' +
    'Dialogue: 0,0:03:41.33,0:03:46.11,K2,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k215}{\\k21}あ{\\k23}り{\\k44}の{\\k23}ま{\\k24}ま{\\k40}の\n' +
    'Dialogue: 0,0:03:41.33,0:03:48.59,K1,,0,0,0,karaoke,{\\pos(477,862)}{\\-A}{\\k393}{\\k21}か{\\k22}け{\\k23}が{\\k22}え{\\k22}の{\\k22}無|<な{\\k22}い{\\k22}僕|<ぼ{\\k22}#|<く{\\k39}だ\n' +
    'Dialogue: 0,0:03:46.22,0:03:51.22,K2,,0,0,0,karaoke,{\\pos(207,439)}{\\-A}{\\k148}{\\k22}知|<し{\\k23}ら{\\k22}ず{\\k22}知|<し{\\k23}ら{\\k23}ず{\\k22}隠|<か{\\k22}#|<く{\\k23}し{\\k24}て{\\k40}た\n' +
    'Dialogue: 0,0:03:46.22,0:03:55.70,K1,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k415}{\\k22}本|<ほ{\\k22}#|<ん{\\k22}当|<と{\\k22}の{\\k35}声|<こ{\\k34}#|<え{\\k48}を{\\k22}響|<ひ{\\k20}#|<び{\\k24}か{\\k35}せ{\\k31}て{\\k39}よ、\n' +
    'Dialogue: 0,0:03:48.70,0:03:55.70,K2,,0,0,0,karaoke,{\\pos(1210,862)}{\\-A}{\\k544}{\\k21}ほ{\\k40}ら\n' +
    'Dialogue: 0,0:03:52.30,0:04:02.81,K1,,0,0,0,karaoke,{\\pos(207,227)}{\\-A}{\\k251}{\\k21}見|<み{\\k22}な{\\k22}い{\\k23}フ{\\k44}リ{\\k23}し{\\k22}て{\\k22}い{\\k23}て{\\k38}も\n' +
    'Dialogue: 0,0:03:52.30,0:04:02.81,K2,,0,0,0,karaoke,{\\pos(207,439)}{\\-A}{\\k518}{\\k22}確|<た{\\k22}#|<し{\\k22}か{\\k24}に{\\k34}そ{\\k34}こ{\\k40}に\n' +
    'Dialogue: 0,0:03:55.81,0:04:02.81,K1,,0,0,0,karaoke,{\\pos(639,650)}{\\-A}{\\k367}{\\k22}今|<い{\\k22}#|<ま{\\k22}も{\\k33}そ{\\k33}こ{\\k45}に{\\k22}あ{\\k23}る{\\k21}よ\n' +
    'Dialogue: 0,0:03:55.81,0:04:05.48,K2,,0,0,0,karaoke,{\\pos(301,862)}{\\-A}{\\k611}{\\k21}知|<し{\\k23}ら{\\k22}ず{\\k23}知|<し{\\k23}ら{\\k24}ず{\\k22}隠|<か{\\k21}#|<く{\\k23}し{\\k24}て{\\k40}た\n' +
    'Dialogue: 0,0:04:02.92,0:04:09.88,K1,,0,0,0,karaoke,{\\pos(207,227)}{\\-A}{\\k167}{\\k22}本|<ほ{\\k22}#|<ん{\\k22}当|<と{\\k22}の{\\k35}声|<こ{\\k34}#|<え{\\k48}を{\\k22}響|<ひ{\\k20}#|<び{\\k24}か{\\k35}せ{\\k31}て{\\k39}よ、\n' +
    'Dialogue: 0,0:04:02.92,0:04:09.88,K2,,0,0,0,karaoke,{\\pos(1205,439)}{\\-A}{\\k544}{\\k21}さ{\\k40}あ\n' +
    'Dialogue: 0,0:04:02.92,0:04:12.55,K1,,0,0,0,karaoke,{\\pos(207,650)}{\\-A}{\\k611}{\\k21}見|<み{\\k22}な{\\k22}い{\\k22}フ{\\k43}リ{\\k25}し{\\k22}て{\\k22}い{\\k23}て{\\k39}も\n' +
    'Dialogue: 0,0:04:05.59,0:04:16.36,K2,,0,0,0,karaoke,{\\pos(418,862)}{\\-A}{\\k611}{\\k22}確|<た{\\k22}#|<し{\\k22}か{\\k24}に{\\k34}そ{\\k35}こ{\\k46}に{\\k22}君|<き{\\k20}#|<み{\\k27}の{\\k35}中|<な{\\k32}#|<か{\\k40}に\n'

const parsed = asscompiler.parse(testASS);
const mouthList = parsed.events.dialogue.map(dialogueLine => {
    let timeToStart = dialogueLine.Start;
    return dialogueLine.Text.parsed.map(word => {
        word.Start = timeToStart;
        if (word?.tags?.[0]?.k)
            timeToStart += word?.tags?.[0]?.k / 100
        return word;
    }).filter(word => word.text);
}).reduce((p, c) => [...p, ...c])
    .map(word => ({
        ...word,
        romanji: japanese.romanize(word.text.replace(/.*\|</, ''))
    })).filter(o => o.romanji.match(/[a-z]/)).map(word => ({
        ...word,
        keyInput: ({
            a: ['MouthAA'],
            e: ['MouthEH'],
            i: ['MouthEE'],
            o: ['MouthOH'],
            u: ['MouthOO'],
        })[word.romanji[word.romanji.length - 1]] || ['MouthMM']
    }));
debugger;